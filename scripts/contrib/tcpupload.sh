#!/bin/bash

#      %%% %%%%%%%            |#|
#    %%%% %%%%%%%%%%%        |#|####
#  %%%%% %         %%%       |#|=#####
# %%%%% %   U    U   %%      | | ==####
#%%%%%% % (_      )  %%     | |    ===##
#%%  %%% %  \  W  | %%      | |       =##
#%    %%%% %        %%     | |         ==#
#      %%%% %%%%%%%%%      | |           V

# works with dmenu or wmenu!!
# https://git.tcp.direct/S4D
#    https://git.tcp.direct/tcp.direct/tcp.ac/commit/c18f64059542e35144fd7a479e6758549d017753
DIR="$HOME/.config/tcp-ac/"
DEFAULT_ICON="$DIR/tcp_icon.png"
FAILED_ICON="$DIR/tcp_failed.png"
UPLOADED="$DIR/tcp_uploads.txt"
SITE="https://tcp.ac/i/put"

function unpackString() {
	base64 -d | gzip -d
}

if [ ! -d "$DIR" ]; then
	if ! mkdir -p "$DIR"; then
		echo "Failed to create directory: $DIR"
		exit 1
	fi
	ICON="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"
	unpackString <<<"$ICON" >"$DEFAULT_ICON"
	ICON2="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"
	unpackString <<<"$ICON2" >"$FAILED_ICON"

	script_path="${BASH_SOURCE[0]}"
	sed -i "/^if \[ ! -d \"\$DIR\" \]; then/,/^fi/d" "$script_path"
fi

function detect_display_server() {
	if [ -n "$WAYLAND_DISPLAY" ]; then
		echo "Wayland"
	elif [ -n "$DISPLAY" ]; then
		echo "Xorg"
	else
		echo "Unknown"
	fi
}

display_server=$(detect_display_server)

if [ "$display_server" = "Wayland" ]; then
	dmenu_cmd="wmenu -S #550077"
	clip_cmd="wl-copy"
else
	dmenu_cmd="dmenu"
	clip_cmd="xclip -selection clipboard"
fi

function notification {
	local id="$1"
	local urgency="$2"
	local title="$3"
	local message="$4"
	local icon="$5"
	dunstify -r "$id" -u "$urgency" -i "$icon" "$title" "$message"
}

function success_notification {
	local id="$1"
	local urgency="$2"
	local title="$3"
	local message="$4"
	local icon="$5"
	dunstify -r "$id" -u "$urgency" -i "$icon" "$title" -h string:bgcolor:#013220 -h string:fgcolor:#44ff44 -h string:frcolor:#44ff44 "$message"
}

function is_text_file {
	file_output=$(file "$1")
	if echo "$file_output" | grep -q "text"; then
		return 0 # File is a text file
	else
		return 1 # File is not a text file
	fi
}

function tcpup {
	options="Upload\nRecent\nCancel"
	selected=$(echo -e "$options" | $dmenu_cmd -l 3)
	if [ "$selected" = "Upload" ]; then
		target="$1"
		[ -z "$target" ] && target="$(realpath .)"

		ls() {
			echo ..
			command ls -ALNpX1 --group-directories-first "$target"
		}

		while :; do
			sel="$(ls | $dmenu_cmd -l 25)" || exit
			if [ "$sel" = "/" ]; then
				newt="$sel"
			else
				newt="$(realpath "$target/$sel")"
			fi
			if [ -e "$newt" ]; then
				target="$newt"
				if [ ! -d "$target" ]; then
					echo "Location: $target"

					command="curl -sf -F'upload=@$target' $SITE"

					# Display rotating status using dunst notifications
					local notif_id=9999 # Use a constant ID for the upload session

					# We will use a temporary file to hold the icon path

					notification "$notif_id" "low" "Uploading..." "$target" "$DEFAULT_ICON"

					# Perform the upload and capture the output (including errors)
					result=$(eval "$command" 2>&1)

					if [ $? -eq 0 ]; then
						# Upload was successful, parse the URL and show green notification
						url=$(echo "$result" | grep -o '"Imgurl":"[^"]*' | cut -d'"' -f4)
						full_result="$(date '+%d-%m-%y-%H:%M:%S')    $result    $(echo "$target" | awk -F'/' '{print $(NF)}')"
						echo "$url" | $clip_cmd
						success_notification "$notif_id" "normal" "TCP UPLOAD SUCCESS" "FILE: $target \nURL: $url \nCopied to clipboard!" "$target"
						echo "$full_result" >>"$UPLOADED"
						echo "Uploaded"
						break
					else
						# Upload failed, show red notification with the error message
						notification "$notif_id" "critical" "TCP UPLOAD Failed!" "$result" "$FAILED_ICON"
						break
					fi
				fi
			fi
		done
	elif [ "$selected" = "Recent" ]; then
		# Get the list of recently uploaded image names from tcp_uploads.txt
		image_names=$(awk '{print $NF}' "$UPLOADED")

		selected_name=$(echo -e "$image_names" | $dmenu_cmd -l 10)

		# Find the corresponding entry in tcp_uploads.txt for the selected image name
		selected_entry=$(grep "$selected_name" "$UPLOADED")

		# Extract the Imgurl and ToDelete URLs from the selected entry
		imgurl=$(echo "$selected_entry" | grep -o '"Imgurl":"[^"]*' | cut -d'"' -f4)
		to_delete=$(echo "$selected_entry" | grep -o '"ToDelete":"[^"]*' | cut -d'"' -f4)

		if [ -n "$to_delete" ]; then
			action=$(echo -e "COPY\nDELETE" | $dmenu_cmd -l 2)
			case "$action" in
			"COPY")
				echo "$imgurl" | $clip_cmd
				success_notification "9998" "normal" "$selected_name" "<span background='green' foreground='black'>URL: $imgurl</span>\nCopied to clipboard" "$DEFAULT_ICON"
				;;
			"DELETE")
				delete_action=$(echo -e "COPY ONLY\nDELETE NOW" | $dmenu_cmd -l 2)
				case "$delete_action" in
				"COPY ONLY")
					echo "$to_delete" | $clip_cmd
					success_notification "9999" "normal" "$selected_name" "<span background='red' foreground='black'>ToDelete URL: $to_delete</span>\nCopied to clipboard" "$DEFAULT_ICON"
					;;
				"DELETE NOW")
					delete_result=$(curl -sf "$to_delete")
					if [ $? -eq 0 ]; then
						if echo "$delete_result" | grep -q "DELETE_SUCCESS"; then
							success_notification "9999" "normal" "$selected_name" "Image successfully deleted." "$DEFAULT_ICON"
							# Remove the entry from tcp-uploads.txt
							sed -i "/$selected_name/d" "$UPLOADED"
						else
							notification "9999" "critical" "$selected_name" "Failed to delete image." "$FAILED_ICON"
						fi
					else
						notification "9999" "critical" "$selected_name" "Failed to delete image." "$FAILED_ICON"
					fi
					;;
				*)
					return
					;;
				esac
				;;
			*)
				return
				;;
			esac
		else
			# If there is no ToDelete URL, simply copy the Imgurl to the clipboard
			echo "$imgurl" | $clip_cmd
			success_notification "9998" "normal" "$selected_name" "<span background='green' foreground='black'>URL: $imgurl</span>\nCopied to clipboard" "$DEFAULT_ICON"
		fi
	elif [ "$selected" = "Cancel" ]; then
		return
	fi
}
tcpup "$@"
